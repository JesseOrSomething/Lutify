<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#EADDFF" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#362957" media="(prefers-color-scheme: dark)">
    <title>PixelPerfect</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>

    <!-- Landing Page for First-Time Users -->
    <div id="landing-page" style="display: none;">
        <div class="landing-content">
            <span class="material-symbols-outlined landing-icon">auto_awesome</span>
            <h1>Welcome to PixelPerfect</h1>
            <p>For a fullscreen experience, add this app to your Home Screen.</p>
            <div class="install-instructions">
                <p><strong>To Install:</strong></p>
                <ol>
                    <li>Tap your browser's menu (<span class="material-symbols-outlined inline-icon">more_vert</span> or <span class="material-symbols-outlined inline-icon">ios_share</span>).</li>
                    <li>Select 'Add to Home Screen' or 'Install App'.</li>
                </ol>
            </div>
            <button id="enter-app-button" class="action-button large">Continue to App</button>
        </div>
    </div>

    <!-- Main App Interface -->
    <div id="app" class="hidden">
        <header class="app-bar">
            <h1 class="app-title">PixelPerfect</h1>
            <button id="install-button-main" class="icon-button" title="Install App">
                <span class="material-symbols-outlined">download_for_offline</span>
            </button>
        </header>

        <main class="main-content">
            <div id="image-workspace">
                <!-- The canvas is now controlled by WebGL -->
                <canvas id="canvas"></canvas>
                <div id="placeholder">
                    <span class="material-symbols-outlined placeholder-icon">add_photo_alternate</span>
                    <p>Add a photo to begin</p>
                </div>
            </div>

            <!-- Simplified Controls with Dropdown Menus -->
            <div class="controls-container">
                <div class="control-group">
                    <label for="photo-select" class="control-label">Photo</label>
                    <div class="select-wrapper">
                         <select id="photo-select" class="control-select"></select>
                    </div>
                    <label for="image-upload" class="action-button">Add</label>
                </div>
                <div class="control-group">
                    <label for="lut-select" class="control-label">Filter</label>
                     <div class="select-wrapper">
                        <select id="lut-select" class="control-select"></select>
                    </div>
                    <label for="lut-upload" class="action-button">Import</label>
                </div>
            </div>
        </main>

        <input type="file" id="image-upload" accept="image/*" multiple style="display: none;">
        <input type="file" id="lut-upload" accept=".cube" multiple style="display: none;">
    </div>

    <script src="app.js"></script>
</body>
</html>
